<!DOCTYPE html>
<html>
<head>
    <title>The Mirror</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
<div class="landing">
    <h1 style="color: white; padding: 5vh;"> the self in the mirror the mirror in the self</h1>
    <div class="mirror-container">
        <img src="/static/assets/frame.PNG" class="frame">
        <div class="mirror" id="mirror">
            <video id="camera" autoplay playsinline></video>
        </div>
    </div>
    <h2 class="mirror-caption" id="caption1">Come closer.</h2>
    <h2 class="mirror-caption" id="caption2">Look into the mirror.</h2>
</div>

<script>
// Request camera access
const mirror = document.getElementById("mirror");
const video = document.getElementById("camera");
const caption1 = document.getElementById("caption1");
const caption2 = document.getElementById("caption2");

let stream = null;
let cameraActive = false;

// First click → activate camera
mirror.addEventListener("click", async () => {
    if (!cameraActive) {
        stream = await navigator.mediaDevices.getUserMedia({ video: true });
        video.srcObject = stream;
        video.style.display = "block";
        caption1.style.display = "none";
        caption2.style.display = "block";
        cameraActive = true;
    } else {
        // Camera is already active → go to next scene
        window.location.href = "door.html";
    }
});
</script>

</body>
</html>